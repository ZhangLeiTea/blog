# 参考资料

<https://www.cnblogs.com/xinysu/p/6555082.html>

# redo_log

1. 控制变量
</br>
2. 文件位置
   - mysql数据目录/ib_logfile0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;、ib_logfile1
</br>
3. 目的为了维持事务的持久性
</br>
4. 写入流程
   - 在事务执行的时候就开始写入redo_log
   - 先写入redo_log的缓冲区 [Innodb_log_buffer]
   - redo缓冲区按照一定的策略刷到物理磁盘ib_logfile0中
</br>
5. 即使某个事务还没有提交，Innodb存储引擎仍然每秒会将重做日志缓存刷新到重做日志文件
   - 这一点是必须要知道的，因为这可以很好地解释再大的事务的提交（commit）的时间也是很短暂的。

# undo_log

1. 控制变量
</br>
2. 文件位置
   - mysql数据目录/undo_001 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undo_002
</br>
3. 作用
    - 维持事务的原子性
    - 同时可以提供多版本并发控制下的读（MVCC），也即非锁定读
</br>
4. 写入流程
   - 事务（sql语句）开始之前，将当前是的版本生成undo log，undo 也会产生 redo 来保证undo log的可靠性
   - 先写入redo_log的缓冲区 [Innodb_log_buffer]
   - redo缓冲区按照一定的策略刷到物理磁盘ib_logfile0中
</br>
5. 表空间
   - 共享表空间
   - 独立表空间
     - 如果需要设置独立表空间，需要在初始化数据库实例的时候，指定独立表空间的数量
</br>
6. 记录
   - 逻辑语句
   - 主要来自 INSERT UPDATE DELETE，而UNDO LOG中分为两种类型，一种是 INSERT_UNDO（INSERT操作），记录插入的唯一键值；一种是 UPDATE_UNDO（包含UPDATE及DELETE操作），记录修改的唯一键值以及old column记录。