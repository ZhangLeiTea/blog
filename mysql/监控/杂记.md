# 内存使用

> `SELECT * FROM performance_schema.memory_summary_global_by_event_name WHERE EVENT_NAME LIKE 
'memory/group_rpl/GCS_XCom::xcom_cache';`  
  
> `select substring_index(event_name, '/', 2) as code_area, sys.format_bytes(sum(current_alloc)) as current_alloc from sys.x$memory_global_by_current_bytes group by substring_index(event_name, '/', 2) order by sum(current_alloc) desc;`  


  
> `SELECT * FROM performance_schema.setup_instruments WHERE ENABLED != "YES" and NAME LIKE '%memory%';`

>SELECT * FROM performance_schema.setup_instruments WHERE NAME LIKE '%memory/innodb%'


select * from memory_summary_by_thread_by_event_name;


`select substring_index(event_name, '/', 2) as code_area, sys.format_bytes(sum(CURRENT_NUMBER_OF_BYTES_USED)) as current_alloc from memory_summary_by_thread_by_event_name group by substring_index(event_name, '/', 2) order by sum(CURRENT_NUMBER_OF_BYTES_USED) desc;` 



> SHOW ENGINE INNODB STATUS;

> select * from performance_schema.threads;
## 资料

> <https://dev.mysql.com/doc/refman/8.0/en/memory-use.html>  
> <https://www.percona.com/blog/2014/01/24/mysql-server-memory-usage-2/>